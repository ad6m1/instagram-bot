<script>
  // لازم يكون عندك fb-root مثل ما عندك أصلاً
  // <div id="fb-root"></div>

  const FB_APP_ID = "793608407068841"; // نفس اللي حاطه بملفك :contentReference[oaicite:2]{index=2}

  // 1) تحميل Facebook SDK
  (function(d, s, id) {
    const fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    const js = d.createElement(s);
    js.id = id;
    js.src = "https://connect.facebook.com/ar_AR/sdk.js";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, "script", "facebook-jssdk"));

  // 2) تهيئة SDK
  window.fbAsyncInit = function () {
    FB.init({
      appId: FB_APP_ID,
      cookie: true,
      xfbml: false,
      version: "v18.0",
    });

    console.log("FB SDK ready");
  };

  // 3) دالة تسجيل الدخول (هذي كانت مفقودة عندك)
  function loginWithFacebook() {
    // مهم: لو الـSDK لسه ما جاهز، لا تكمل
    if (typeof FB === "undefined") {
      alert("Facebook SDK لسه ما تحمّل. جرّب بعد ثواني.");
      return;
    }

    // Popup لازم ينفتح من ضغط زر (user gesture) — انت تمام هنا
    FB.login(
      function (response) {
        if (!response.authResponse) {
          alert("تم إلغاء تسجيل الدخول أو فشل.");
          return;
        }

        const accessToken = response.authResponse.accessToken;
        const userID = response.authResponse.userID;

        console.log("Login OK", { userID });

        // مثال: جلب بيانات المستخدم (اختياري)
        FB.api("/me", { fields: "id,name,email" }, function (me) {
          console.log("ME:", me);
          alert("تم تسجيل الدخول ✅\n" + (me.name || "User"));
        });

        // ملاحظة مهمة تحت: هذا التوكن قصير/غير آمن للتشغيل الحقيقي
      },
      {
        scope: [
          "public_profile",
          "email",
          "pages_show_list",
          "pages_read_engagement",
          "instagram_basic",
          "instagram_manage_comments",
          "instagram_manage_messages"
        ].join(","),
        return_scopes: true,
      }
    );
  }
</script>
